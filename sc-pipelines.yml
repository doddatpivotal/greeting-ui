# This file describes which services are required by this application
# in order for the smoke tests on the TEST environment and end to end tests
# on the STAGE environment to pass

# lowercase name of the environment
test:
  # list of required services
  services:
    - name: config-server
      type: broker
      broker: p-config-server
      plan: standard
      params:
        git:
          uri: https://github.com/doddatpivotal/app-config-1
      useExisting: true
    - name: cloud-bus
      type: broker
      broker: p.rabbitmq
      plan: single-node-3.7
      useExisting: true
    - name: service-registry
      type: broker
      broker: p-service-registry
      plan: standard
      useExisting: true
    - name: circuit-breaker-dashboard
      type: broker
      broker: p-circuit-breaker-dashboard
      plan: standard
      useExisting: true
    - name: stubrunner
      type: stubrunner
      coordinates: org.springframework.cloud:spring-cloud-contract-stub-runner-boot:2.1.0.RELEASE
      pathToManifest: sc-pipelines/manifest-stubrunner.yml
stage:
  services:
    - name: config-server
      type: broker
      broker: p-config-server
      plan: standard
      params:
          git:
              uri: https://github.com/doddatpivotal/app-config-1
    - name: cloud-bus
      type: broker
      broker: p.rabbitmq
      plan: single-node-3.7
    - name: service-registry
      type: broker
      broker: p-service-registry
      plan: standard
    - name: circuit-breaker-dashboard
      type: broker
      broker: p-circuit-breaker-dashboard
      plan: standard
